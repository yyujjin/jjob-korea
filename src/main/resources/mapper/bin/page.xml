<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.dao.PageDAO">
<!--         <![CDATA[]]> : mybatis 에서 특수문자 인식 처리 -->
    <select id="listWithPaging" resultType="com.boot.dto.CompanyCommunityBoardDTO">
    	<![CDATA[
			select rownum, companyCommunityBoardNum, companyUserName, companyCommunityBoardTitle, companyCommunityBoardContent, companyCommunityBoardDate, companyCommunityBoardHit 
			 from (select rownum, companyCommunityBoardNum, companyUserName, companyCommunityBoardTitle, companyCommunityBoardContent, companyCommunityBoardDate, companyCommunityBoardHit 
			  from (select row_number() over(order by companyCommunityBoardNum desc) as rownum
							 , companyCommunityBoardNum
							 , companyUserName, companyCommunityBoardTitle, companyCommunityBoardContent
							 , companyCommunityBoardDate, companyCommunityBoardHit 
						  from companyCommunityBoard
						 order by companyCommunityBoardNum desc) a
				where rownum <= (#{pageNum} * #{amount})
				  ) aa
			where rownum > (#{pageNum}-1)*#{amount}
    	]]>
    </select>
    <select id="getTotalCount" resultType="int">
    	select count(*) from companyCommunityBoard
    </select>
</mapper>











