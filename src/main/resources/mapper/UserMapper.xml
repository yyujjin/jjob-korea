<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jjobkorea.mapper.UserMapper">


    <select id="login" parameterType="UserDTO" resultType="UserDTO">
        select * from team_db.user_info where userId=#{userId} AND password=#{password};
    </select>


	<insert id="individualUser" parameterType="map">
        INSERT INTO user_info (
            userId, password, name, phone, addr, email, birthd, gender, registrationDate, userType
        ) VALUES (
            #{userId}, #{password}, #{name}, #{phone}, #{addr}, #{email}, #{birthd}, #{gender}, CURRENT_TIMESTAMP, 1
        );
    </insert>

    <insert id="companyUser" parameterType="map">
        INSERT INTO user_info (
            userId, password, name, phone, addr, email, birthd, gender, registrationDate, userType
        ) VALUES (
            #{userId}, #{password}, #{name}, #{phone}, #{addr}, #{email}, #{birthd}, #{gender}, CURRENT_TIMESTAMP, 2
        );
    </insert>

    <insert id="insertCompanyInfo" parameterType="map">
        INSERT INTO companyinfo (
            id, res, employeeCount, companyType, salary, ceo, name, birthd, addr, businssNum
        ) VALUES (
            (SELECT LAST_INSERT_ID()), #{res}, #{employeeCount}, #{companyType}, #{salary}, #{ceo}, #{name}, #{birthd}, #{addr}, #{businssNum}
        );
    </insert>
	
	
	<select id="checkUserId" parameterType="String" resultType="int">
			SELECT COUNT(*) FROM user_info WHERE userId = #{userId}
	</select>
	
	<select id="userInfo" parameterType="String" resultType="com.jjobkorea.dto.UserDTO">
        select * from user_info where userId = #{userId}
    </select>
	
</mapper>